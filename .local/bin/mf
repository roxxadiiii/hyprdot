#!/bin/bash

# Directory containing your music files
MUSIC_DIR="${1:-$HOME/mux/new}"

# Find music files (you can add more extensions if needed)
music_files=$(find "$MUSIC_DIR" -type f \( -iname "*.mp3" -o -iname "*.flac" -o -iname "*.wav" -o -iname "*.ogg" \))

# Check if any music files were found
if [ -z "$music_files" ]; then
    echo "No music files found in $MUSIC_DIR"
    exit 1
fi

# Use fzf to select one or multiple files
selected=$(echo "$music_files" | fzf --multi --preview "mpv --no-audio --vo=image-viewer {}" --preview-window=up:1 --height=100%)

# Exit if nothing selected
[ -z "$selected" ] && exit 0

# Play selected file(s) with mpv
echo "$selected" | xargs -d '\n' mpv

